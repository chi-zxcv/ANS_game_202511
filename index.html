<!doctype html>
<html lang="zh-Hant">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>ANS 互動教室｜Autonomic Nervous System Playground</title>
    <!-- Tailwind CDN（快速試玩） -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React UMD + Babel（直接在瀏覽器跑 JSX）-->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  <body class="bg-slate-900">
    <div id="root"></div>

    <script type="text/babel">
      const { useEffect, useMemo, useRef, useState } = React;
      const clamp = (n, min = 0, max = 100) => Math.min(max, Math.max(min, n));

      const Badge = ({ children, tone = "gray" }) => {
        const tones = {
          gray: "bg-gray-800/80 text-gray-100",
          green: "bg-green-600/90 text-white",
          yellow: "bg-yellow-600/90 text-white",
          red: "bg-red-600/90 text-white",
          blue: "bg-blue-600/90 text-white",
          purple: "bg-purple-600/90 text-white",
        };
        return (
          <span className={`inline-flex items-center rounded-full px-2 py-0.5 text-xs ${tones[tone]}`}>{children}</span>
        );
      };

      const Card = ({ title, subtitle, children, footer, variant = "light" }) => {
  const bgClass = variant === "dark"
    ? "bg-slate-900/70"     // 深色卡片用這個
    : "bg-white/5";         // 原本淡淡白色

  return (
    <div className={`rounded-2xl border border-white/10 ${bgClass} p-5 shadow-xl shadow-black/20 backdrop-blur`}>
      <div className="mb-3 flex items-start justify-between">
        <div>
          <h3 className="text-lg font-semibold text-white">{title}</h3>
          {subtitle && (
            <p className="mt-0.5 text-sm leading-snug text-white/70">
              {subtitle}
            </p>
          )}
        </div>
        <Badge tone="blue">互動</Badge>
      </div>
      <div className="text-white/90">{children}</div>
      {footer && (
        <div className="mt-4 border-t border-white/10 pt-3 text-sm text-white/70">
          {footer}
        </div>
      )}
    </div>
  );
};


      const Meter = ({ label, value, tone = "emerald" }) => (
        <div>
          <div className="mb-1 flex items-center justify-between">
            <span className="text-sm text-white/80">{label}</span>
            <span className="text-sm tabular-nums text-white/70">{Math.round(value)}</span>
          </div>
          <div className="h-2 w-full rounded-full bg-white/10 overflow-hidden">
            <div className={`h-full rounded-full bg-${tone}-400 transition-[width] duration-300`} style={{ width: `${clamp(value)}%` }} />
          </div>
        </div>
      );

      const Toggle = ({ checked, onChange, label }) => (
        <label className="flex cursor-pointer items-center gap-3">
          <button onClick={() => onChange(!checked)} className={`h-6 w-10 rounded-full p-0.5 transition ${checked ? "bg-green-400" : "bg-white/20"}`}>
            <span className={`block h-5 w-5 rounded-full bg-white transition-transform ${checked ? "translate-x-4" : "translate-x-0"}`} />
          </button>
          <span className="text-sm text-white/80">{label}</span>
        </label>
      );

      function ANSPlayground() {
        const [tab, setTab] = useState("play"); // "play" | "learn" | "quiz"

        // === 共享基準狀態（供所有遊戲讀寫） ===
        const [sym, setSym] = useState(60);   // 交感（油門）
        const [para, setPara] = useState(45); // 副交感（煞車）
        const [hrv, setHRV] = useState(55);   // SDNN 示意

        // ⭐ 新增：壓力等級（0 ~ 10）
        const [stressLevel, setStressLevel] = useState(0);

        const balance = useMemo(() => {
          const ratio = (sym + 1) / (para + 1);
          const dist = Math.abs(Math.log(ratio));
          return clamp(100 - dist * 60, 0, 100);
        }, [sym, para]);
        const lf = sym * 12; // 示意
        const hf = para * 10;
        const ratio = ((sym + 1) / (para + 1)).toFixed(2);
        const ratioWarn = parseFloat(ratio) > 2
          ? { tone: "yellow", msg: "⚠️ 交感偏高（壓力/緊繃）" }
          : parseFloat(ratio) < 0.5
          ? { tone: "yellow", msg: "⚠️ 可能較疲倦（副交感占優）" }
          : { tone: "green", msg: "✅ 平衡良好" };

        // ⭐ 新增：用目前 balance 判讀 ANS 模式（給營養建議用）
        const ansMode =
          balance >= 70 ? "recovery" : balance <= 40 ? "stress" : "middle";

        // ⭐ 新增：改變壓力等級的小工具
        const changeStress = (delta) => {
          setStressLevel((v) => {
            const next = v + delta;
            return Math.max(0, Math.min(10, next)); // 限制在 0~10
          });
        };

        // === 遊戲 B：呼吸訓練 ===
        const [breathingOn, setBreathingOn] = useState(false);
        const breathTick = useRef(0);
        useEffect(() => {
          if (!breathingOn) return;
          const id = setInterval(() => {
            breathTick.current += 1;
            const phase = Math.sin(breathTick.current / 12); // ~5–6s 週期
            setPara((p) => clamp(p + phase * 2, 5, 95));
            setSym((s) => clamp(s - 0.4 + Math.random() * 0.8, 5, 95));
            setHRV((h) => clamp(h + 0.6 + phase * 0.4, 20, 110));
          }, 250);
          return () => clearInterval(id);
        }, [breathingOn]);

        // === 新增：遊戲 C｜情境反應挑戰（30 秒） ===
        const [cTime, setCTime] = useState(0);
        const [cRunning, setCRunning] = useState(false);
        const [cScore, setCScore] = useState(0); // Balance >= 70 的秒數
        useEffect(() => {
          if (!cRunning) return;
          const id = setInterval(() => {
            setCTime((t) => {
              const nt = t + 1;
              if (balance >= 70) setCScore((s) => s + 1);
              if (nt >= 30) setCRunning(false);
              return nt;
            });
          }, 1000);
          return () => clearInterval(id);
        }, [cRunning, balance]);

        const triggerStress = (type) => {
          // 一些典型壓力事件
          const map = {
            "咖啡加倍": { ds: +10, dp: -3, dh: -2 },
            "急件通知": { ds: +12, dp: -5, dh: -3 },
            "吵雜環境": { ds: +8, dp: -4, dh: -2 },
          };
          const m = map[type];
          setSym((v) => clamp(v + m.ds, 0, 100));
          setPara((v) => clamp(v + m.dp, 0, 100));
          setHRV((v) => clamp(v + m.dh, 20, 110));
        };
        const triggerCalm = (type) => {
          // 放鬆行為
          const map = {
            "深呼吸 10 次": { ds: -6, dp: +10, dh: +6 },
            "伸展 1 分鐘": { ds: -4, dp: +8, dh: +4 },
            "閉眼靜坐": { ds: -5, dp: +9, dh: +5 },
          };
          const m = map[type];
          setSym((v) => clamp(v + m.ds, 0, 100));
          setPara((v) => clamp(v + m.dp, 0, 100));
          setHRV((v) => clamp(v + m.dh, 20, 110));
        };

        const startC = () => { setCScore(0); setCTime(0); setCRunning(true); };

        // === 新增：遊戲 D｜生活習慣調音台（6 步挑戰） ===
        const [dSteps, setDSteps] = useState(0);
        const [dLog, setDLog] = useState([]);
        const D_LIMIT = 6;
        const dApply = (label, eff) => {
          if (dSteps >= D_LIMIT) return;
          setSym((v) => clamp(v + (eff.ds || 0), 0, 100));
          setPara((v) => clamp(v + (eff.dp || 0), 0, 100));
          setHRV((v) => clamp(v + (eff.dh || 0), 20, 110));
          setDSteps((s) => s + 1);
          setDLog((arr) => [...arr, label]);
        };
        const dReset = () => { setDSteps(0); setDLog([]); };
        const dGoalOK = balance >= 80 && hrv >= 60;

        // === 小測驗資料 ===
        const q = [
          { ask: "交感神經主要負責哪一種狀態？", choices: ["放鬆入睡", "打起精神、應對壓力", "消化與修復", "降低心率"], ans: 1 },
          { ask: "LF/HF 比值大於 2，最可能代表什麼？", choices: ["過度放鬆", "偏緊繃、壓力較高", "完全健康", "量測錯誤"], ans: 1 },
          { ask: "HRV（例如 SDNN）偏低通常表示？", choices: ["恢復力較差/壓力負荷高", "睡眠品質極佳", "交感偏弱", "副交感過強"], ans: 0 },
        ];
        const [quizIdx, setQuizIdx] = useState(0);
        const [quizScore, setQuizScore] = useState(0);
        const [picked, setPicked] = useState(null);
        const submitPick = () => {
          if (picked == null) return;
          if (picked === q[quizIdx].ans) setQuizScore((s) => s + 1);
          setPicked(null);
          setQuizIdx((i) => (i + 1) % q.length);
        };

        return (
          <div className="min-h-screen w-full bg-gradient-to-br from-slate-900 via-indigo-950 to-slate-900 text-white">
            <header className="mx-auto max-w-6xl px-6 pt-8">
              <div className="flex flex-col gap-4 sm:flex-row sm:items-end sm:justify-between">
                <div>
                  <h1 className="text-2xl sm:text-3xl font-bold tracking-tight">
                    自律神經互動教室 <span className="text-indigo-300">ANS Playground</span>
                  </h1>
                  <p className="mt-1 max-w-2xl text-white/70">
                    用小遊戲理解 <strong>交感（LF ≈ 油門）</strong> 與 <strong>副交感（HF ≈ 煞車）</strong>，
                    看看你的「油門/煞車」是否協調，並用呼吸練習提升 HRV（心律變異度）。
                  </p>
                </div>
                <nav className="flex gap-2">
                  {[
                    { k: "play", label: "🎮 小遊戲" },
                    { k: "learn", label: "📚 知識卡" },
                    { k: "quiz", label: "📝 小測驗" },
                    { k: "supp", label: "🍃 營養補充指引" },
                  ].map((t) => (
                    <button key={t.k} onClick={() => setTab(t.k)} className={`rounded-xl px-3 py-2 text-sm font-medium transition hover:bg-white/10 ${tab === t.k ? "bg-white/15" : "bg-white/5"}`}>
                      {t.label}
                    </button>
                  ))}
                </nav>
              </div>
            </header>

            <main className="mx-auto max-w-6xl px-6 pb-20 pt-6">
              {tab === "play" && (
                <section className="grid gap-6 md:grid-cols-2">
                  {/* === 新增：遊戲 1 === */}
                  <Card>
                  <Card
                    variant="dark"
                    title="🌞 平日上班模擬：油門 vs 煞車"
                    subtitle="勾選你今天的情境，看看你的自律神經是偏緊繃還是有好好煞車。"
                  >
                  <div className="rounded-2xl bg-slate-900/50 p-4">

                    <div className="flex flex-col gap-4 md:flex-row">
                      {/* 左邊：行為選擇 + 結果說明 */}
                      <div className="flex-1 space-y-4">
                        <div className="flex items-center justify-between text-xs text-white/80">
                          <span>
                            從早上、午間、晚上和職場事件中，選你今天遇到的情境；同一個活動可重複點擊，代表一整天都在發生。
                          </span>
                          <button
                            onClick={() => {
                              setSym(60);
                              setPara(45);
                              setHRV(55);
                              setStressLevel(0); // ⭐ Reset 時順便把壓力清掉
                            }}
                            className="ml-2 rounded-full border border-white/20 bg-white/5 px-3 py-1 text-xs font-semibold text-white hover:bg-white/10"
                          >
                            Reset
                          </button>
                        </div>

                        {/* 🌅 早晨 */}
                        <div className="rounded-xl bg-white/5 p-3 ring-1 ring-white/10">
                          <div className="mb-2 text-sm font-semibold text-white/90">🌅 早晨</div>
                          <div className="flex flex-wrap gap-2 text-sm">
                            <button
                              onClick={() => {
                                setSym(v => clamp(v + 15));
                                setPara(v => clamp(v - 5));
                                setHRV(v => clamp(v - 3, 20, 110));
                                changeStress(1);
                              }}
                              className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                            >
                              ☕ 兩杯咖啡提神
                            </button>
                            <button
                              onClick={() => {
                                setSym(v => clamp(v + 8));
                                setPara(v => clamp(v + 5));
                                setHRV(v => clamp(v + 3, 20, 110));
                                changeStress(-1);
                              }}
                              className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                            >
                              🏃 慢跑 20 分再上班
                            </button>
                            <button
                              onClick={() => {
                                setSym(v => clamp(v + 6));
                                setPara(v => clamp(v + 2));
                                setHRV(v => clamp(v + 1, 20, 110));
                                changeStress(1);
                              }}
                              className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                            >
                              🚇 通勤塞車/人擠人
                            </button>
                            <button
                              onClick={() => {
                                setSym(v => clamp(v + 4));
                                setPara(v => clamp(v + 3));
                                setHRV(v => clamp(v + 2, 20, 110));
                                changeStress(-1);
                              }}
                              className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                            >
                              🎧 聽音樂安靜通勤
                            </button>
                          </div>
                        </div>

                        {/* 🌞 上午職場事件 */}
                        <div className="rounded-xl bg-white/5 p-3 ring-1 ring-white/10">
                          <div className="mb-2 text-sm font-semibold text-white/90">🌞 上午職場事件</div>
                          <div className="flex flex-wrap gap-2 text-sm">
                            <button
                              onClick={() => {
                                setSym(v => clamp(v + 10));
                                setPara(v => clamp(v - 3));
                                setHRV(v => clamp(v - 3, 20, 110));
                                changeStress(1);
                              }}
                              className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                            >
                              📊 趕資料/整理報表
                            </button>
                            <button
                              onClick={() => {
                                setSym(v => clamp(v + 12));
                                setPara(v => clamp(v - 5));
                                setHRV(v => clamp(v - 4, 20, 110));
                                changeStress(2);
                              }}
                              className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                            >
                              📞 被臨時拉進會議
                            </button>
                            <button
                              onClick={() => {
                                setSym(v => clamp(v + 14));
                                setPara(v => clamp(v - 6));
                                setHRV(v => clamp(v - 5, 20, 110));
                                changeStress(3); // 超爆壓
                              }}
                              className="rounded-lg border border-red-400/40 bg-red-500/10 px-3 py-1.5 transition hover:bg-red-500/20 active:scale-95"
                            >
                              🧨 被老闆念一輪
                            </button>
                            <button
                              onClick={() => {
                                setSym(v => clamp(v + 7));
                                setPara(v => clamp(v + 4));
                                setHRV(v => clamp(v + 2, 20, 110));
                                changeStress(-1); // 有人幫忙降壓
                              }}
                              className="rounded-lg border border-emerald-400/40 bg-emerald-500/10 px-3 py-1.5 transition hover:bg-emerald-500/20 active:scale-95"
                            >
                              🤝 同事幫忙 cover 工作
                            </button>
                          </div>
                        </div>

                        {/* ☀️ 午間 */}
                        <div className="rounded-xl bg-white/5 p-3 ring-1 ring-white/10">
                          <div className="mb-2 text-sm font-semibold text-white/90">☀️ 午間</div>
                          <div className="flex flex-wrap gap-2 text-sm">
                            <button
                              onClick={() => {
                                setSym(v => clamp(v - 5));
                                setPara(v => clamp(v + 8));
                                setHRV(v => clamp(v + 5, 20, 110));
                                changeStress(-2);
                              }}
                              className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                            >
                              😴 午睡 30 分
                            </button>
                            <button
                              onClick={() => {
                                setSym(v => clamp(v + 10));
                                setPara(v => clamp(v - 4));
                                setHRV(v => clamp(v - 2, 20, 110));
                                changeStress(1);
                              }}
                              className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                            >
                              📱 邊吃邊滑手機
                            </button>
                            <button
                              onClick={() => {
                                setSym(v => clamp(v + 10));
                                setPara(v => clamp(v - 2));
                                setHRV(v => clamp(v - 1, 20, 110));
                                changeStress(1);
                              }}
                              className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                            >
                              🧁 下午茶甜點 + 拿鐵
                            </button>
                            <button
                              onClick={() => {
                                setSym(v => clamp(v - 3));
                                setPara(v => clamp(v + 7));
                                setHRV(v => clamp(v + 3, 20, 110));
                                changeStress(-1);
                              }}
                              className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                            >
                              🚶 散步 10 分
                            </button>
                          </div>
                        </div>

                        {/* 🌤 下午職場事件 */}
                        <div className="rounded-xl bg-white/5 p-3 ring-1 ring-white/10">
                          <div className="mb-2 text-sm font-semibold text-white/90">🌤 下午職場事件</div>
                          <div className="flex flex-wrap gap-2 text-sm">
                            <button
                              onClick={() => {
                                setSym(v => clamp(v + 11));
                                setPara(v => clamp(v - 4));
                                setHRV(v => clamp(v - 3, 20, 110));
                                changeStress(2);
                              }}
                              className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                            >
                              🧮 趕專案時程/寫報告
                            </button>
                            <button
                              onClick={() => {
                                setSym(v => clamp(v + 9));
                                setPara(v => clamp(v - 2));
                                setHRV(v => clamp(v - 2, 20, 110));
                                changeStress(1);
                              }}
                              className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                            >
                              💬 接連開會/線上會議
                            </button>
                            <button
                              onClick={() => {
                                setSym(v => clamp(v + 5));
                                setPara(v => clamp(v + 4));
                                setHRV(v => clamp(v + 2, 20, 110));
                                changeStress(-1);
                              }}
                              className="rounded-lg border border-emerald-400/40 bg-emerald-500/10 px-3 py-1.5 transition hover:bg-emerald-500/20 active:scale-95"
                            >
                              ✅ 提早完成一個任務
                            </button>
                          </div>
                        </div>

                        {/* 🌇 晚上 */}
                        <div className="rounded-xl bg-white/5 p-3 ring-1 ring-white/10">
                          <div className="mb-2 text-sm font-semibold text-white/90">🌇 晚上</div>
                          <div className="flex flex-wrap gap-2 text-sm">
                            <button
                              onClick={() => {
                                setSym(v => clamp(v + 8));
                                setPara(v => clamp(v + 4));
                                setHRV(v => clamp(v + 5, 20, 110));
                                changeStress(0);
                              }}
                              className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                            >
                              🏋️ 重訓 40 分
                            </button>
                            <button
                              onClick={() => {
                                setSym(v => clamp(v + 6));
                                setPara(v => clamp(v + 5));
                                setHRV(v => clamp(v + 2, 20, 110));
                                changeStress(0);
                              }}
                              className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                            >
                              🎓 下班後進修課程
                            </button>
                            <button
                              onClick={() => {
                                setSym(v => clamp(v - 8));
                                setPara(v => clamp(v + 10));
                                setHRV(v => clamp(v + 5, 20, 110));
                                changeStress(-2);
                              }}
                              className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                            >
                              📖 睡前閱讀 15 分
                            </button>
                            <button
                              onClick={() => {
                                setSym(v => clamp(v + 12));
                                setPara(v => clamp(v - 6));
                                setHRV(v => clamp(v - 4, 20, 110));
                                changeStress(2);
                              }}
                              className="rounded-lg border border-red-400/40 bg-red-500/10 px-3 py-1.5 transition hover:bg-red-500/20 active:scale-95"
                            >
                              🎮 打電動到午夜
                            </button>
                          </div>
                        </div>

                        {/* ⚡ 一鍵情境 */}
                        <div className="rounded-xl bg-white/5 p-3 ring-1 ring-white/10">
                          <div className="mb-2 text-sm font-semibold text-white/90">⚡ 快速套用</div>
                          <div className="flex flex-wrap gap-2 text-sm">
                            <button
                              onClick={() => {
                                setSym(v => clamp(v + 32));
                                setPara(v => clamp(v - 15));
                                setHRV(v => clamp(v - 10, 20, 110));
                                changeStress(4);
                              }}
                              className="rounded-lg border border-red-400/40 bg-red-500/10 px-3 py-1.5 font-medium text-red-100 transition hover:bg-red-500/20 active:scale-95"
                            >
                              🔥 修羅場高壓日
                            </button>
                            <button
                              onClick={() => {
                                setSym(v => clamp(v + 2));
                                setPara(v => clamp(v + 30));
                                setHRV(v => clamp(v + 16, 20, 110));
                                changeStress(-3);
                              }}
                              className="rounded-lg border border-emerald-400/40 bg-emerald-500/10 px-3 py-1.5 font-medium text-emerald-100 transition hover:bg-emerald-500/20 active:scale-95"
                            >
                              🌿 理想平衡日
                            </button>
                            <button
                              onClick={() => {
                                setSym(v => clamp(v + 6));
                                setPara(v => clamp(v + 4));
                                setHRV(v => clamp(v + 1, 20, 110));
                                changeStress(-1);
                              }}
                              className="rounded-lg border border-amber-400/40 bg-amber-500/10 px-3 py-1.5 font-medium text-amber-100 transition hover:bg-amber-500/20 active:scale-95"
                            >
                              😌 打混療癒日
                            </button>
                          </div>
                        </div>

                        {/* 數值結果 */}
                        <div className="grid grid-cols-3 gap-3">
                          <Meter label="Balance" value={balance} tone="emerald" />
                          <Meter label="LF (交感)" value={clamp(lf / 12)} tone="yellow" />
                          <Meter label="HRV (SDNN)" value={clamp(hrv)} tone="purple" />
                        </div>

                        <div className="flex items-center gap-2 text-sm">
                          <Badge tone={balance >= 70 ? "green" : balance >= 40 ? "yellow" : "red"}>
                            {balance >= 70 ? "🟢 平衡日" : balance >= 40 ? "🟡 中性日" : "🔴 緊繃日"}
                          </Badge>
                          <span className="text-white/70">
                            {balance >= 70
                              ? "身心協調，很不錯！這種節奏可以當作你理想的一天。"
                              : balance >= 40
                              ? "節奏尚可，建議晚上多一點呼吸/伸展幫自己收尾。"
                              : "油門踩太深了！今晚試試早睡、泡澡、少藍光，讓煞車跟上來。"}
                          </span>
                        </div>
                      </div>

                      {/* 右邊：小人物可視化（用壓力量決定表情） */}
                      <div className="w-full md:w-40 rounded-2xl border border-white/10 bg-white/5 p-3 text-xs text-white/80">
                        <div className="mb-2 text-[11px] uppercase tracking-wide text-white/60">
                          今日狀態視覺化
                        </div>
                        <div className="flex flex-col items-center gap-3">
                          {(() => {
                            const face =
                              stressLevel >= 8 ? "😵" :
                              stressLevel >= 5 ? "😣" :
                              stressLevel >= 2 ? "😐" :
                              "😊";
                            const label =
                              stressLevel >= 8 ? "爆肝警報" :
                              stressLevel >= 5 ? "壓力山大" :
                              stressLevel >= 2 ? "一般上班壓力" :
                              "還算輕鬆";

                            return (
                              <>
                                <div className="relative flex flex-col items-center">
                                  <div className="flex h-8 w-8 items-center justify-center rounded-full bg-white/90 text-lg">
                                    {face}
                                  </div>
                                  <div
                                    className={`mt-1 h-16 w-6 rounded-full border-2 ${
                                      balance >= 70
                                        ? "border-emerald-400 bg-emerald-500/20"
                                        : balance >= 40
                                        ? "border-amber-400 bg-amber-500/15"
                                        : "border-red-400 bg-red-500/15"
                                    } flex items-end justify-center overflow-hidden`}
                                  >
                                    <div
                                      className={`w-full ${
                                        balance >= 70
                                          ? "bg-emerald-400"
                                          : balance >= 40
                                          ? "bg-amber-400"
                                          : "bg-red-400"
                                      }`}
                                      style={{ height: `${clamp(balance)}%` }}
                                    />
                                  </div>
                                </div>
                                <div className="text-center space-y-1">
                                  <div className="text-[11px] text-white/60">
                                    Balance：{Math.round(balance)}
                                  </div>
                                  <div className="text-[11px] text-white/60">
                                    HRV：{Math.round(hrv)}
                                  </div>
                                  <div className="text-[11px] text-white/60">
                                    壓力等級：{stressLevel} / 10
                                  </div>
                                  <div className="mt-1 text-xs font-semibold">
                                    {label}
                                  </div>
                                </div>
                              </>
                            );
                          })()}
                        </div>
                      </div>
                    </div>
                    </div>
                  </Card>



                  </Card>


                  {/* === 新增：遊戲 1 === */}
                       <Card
                       variant="dark"
                       title="🌞 假日生活模擬"
                       subtitle="勾選你今天的情境，看看你的假日的自律神經是偏緊繃還是有好好煞車。"
                        >
                       <div className="rounded-2xl bg-slate-900/50 p-4">

                      <div className="flex flex-col gap-4 md:flex-row">
                        {/* 左邊：假日活動選擇 */}
                        <div className="flex-1 space-y-4">
                          <div className="flex items-center justify-between text-xs text-white/80">
                            <span>選 3–4 個你假日真的會做的活動；可重複按，代表今天做很多次這件事。</span>
                            <button
                              onClick={() => {
                                setSym(60);
                                setPara(45);
                                setHRV(55);
                                setStressLevel(0); // ⭐ 假日也一起把壓力等級歸零
                              }}
                              className="ml-2 rounded-full border border-white/20 bg-white/5 px-3 py-1 text-xs font-semibold text-white hover:bg-white/10"
                            >
                              Reset
                            </button>
                          </div>

                          {/* 🌅 早晨（假日版） */}
                          <div className="rounded-xl bg-white/5 p-3 ring-1 ring-white/10">
                            <div className="mb-2 text-sm font-semibold text-white/90">🌅 早晨</div>
                            <div className="flex flex-wrap gap-2 text-sm">
                              <button
                                onClick={() => {
                                  setSym(v => clamp(v + 10));
                                  setPara(v => clamp(v - 4));
                                  setHRV(v => clamp(v - 2, 20, 110));
                                  setStressLevel(v => clamp(v + 1, 0, 10));
                                }}
                                className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                              >
                                ☕ 兩杯咖啡提神
                              </button>
                              <button
                                onClick={() => {
                                  setSym(v => clamp(v + 6));
                                  setPara(v => clamp(v + 8));
                                  setHRV(v => clamp(v + 5, 20, 110));
                                  setStressLevel(v => clamp(v - 1, 0, 10));
                                }}
                                className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                              >
                                🏃 慢跑 20 分
                              </button>
                              <button
                                onClick={() => {
                                  setSym(v => clamp(v + 2));
                                  setPara(v => clamp(v + 4));
                                  setHRV(v => clamp(v + 3, 20, 110));
                                  setStressLevel(v => clamp(v - 1, 0, 10));
                                }}
                                className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                              >
                                🎧 聽音樂安靜通勤 / 出門
                              </button>
                              <button
                                onClick={() => {
                                  setSym(v => clamp(v + 2));
                                  setPara(v => clamp(v + 4));
                                  setHRV(v => clamp(v + 3, 20, 110));
                                  setStressLevel(v => clamp(v - 1, 0, 10));
                                }}
                                className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                              >
                                🥯 輕鬆的吃了一份早餐
                              </button>
                            </div>
                          </div>

                          {/* ☀️ 午間（假日版） */}
                          <div className="rounded-xl bg-white/5 p-3 ring-1 ring-white/10">
                            <div className="mb-2 text-sm font-semibold text-white/90">☀️ 午間</div>
                            <div className="flex flex-wrap gap-2 text-sm">
                              <button
                                onClick={() => {
                                  setSym(v => clamp(v - 5));
                                  setPara(v => clamp(v + 10));
                                  setHRV(v => clamp(v + 6, 20, 110));
                                  setStressLevel(v => clamp(v - 2, 0, 10));
                                }}
                                className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                              >
                                😴 午睡 30 分
                              </button>
                              <button
                                onClick={() => {
                                  setSym(v => clamp(v + 10));
                                  setPara(v => clamp(v - 4));
                                  setHRV(v => clamp(v - 2, 20, 110));
                                  setStressLevel(v => clamp(v + 1, 0, 10));
                                }}
                                className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                              >
                                📱 邊吃邊滑手機
                              </button>
                              <button
                                onClick={() => {
                                  setSym(v => clamp(v + 8));
                                  setPara(v => clamp(v - 3));
                                  setHRV(v => clamp(v - 2, 20, 110));
                                  setStressLevel(v => clamp(v + 1, 0, 10));
                                }}
                                className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                              >
                                🧁 下午茶甜點 + 拿鐵
                              </button>
                              <button
                                onClick={() => {
                                  setSym(v => clamp(v - 3));
                                  setPara(v => clamp(v + 8));
                                  setHRV(v => clamp(v + 3, 20, 110));
                                  setStressLevel(v => clamp(v - 1, 0, 10));
                                }}
                                className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                              >
                                🚶 散步 10 分
                              </button>
                            </div>
                          </div>

                          {/* 🌇 晚上（假日版） */}
                          <div className="rounded-xl bg-white/5 p-3 ring-1 ring-white/10">
                            <div className="mb-2 text-sm font-semibold text-white/90">🌇 晚上</div>
                            <div className="flex flex-wrap gap-2 text-sm">
                              <button
                                onClick={() => {
                                  setSym(v => clamp(v + 8));
                                  setPara(v => clamp(v + 4));
                                  setHRV(v => clamp(v + 5, 20, 110));
                                  setStressLevel(v => clamp(v, 0, 10));
                                }}
                                className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                              >
                                🏋️ 重訓 40 分
                              </button>
                              <button
                                onClick={() => {
                                  setSym(v => clamp(v + 6));
                                  setPara(v => clamp(v + 5));
                                  setHRV(v => clamp(v + 2, 20, 110));
                                  setStressLevel(v => clamp(v, 0, 10));
                                }}
                                className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                              >
                                🎓 進修課程 / 課程活動
                              </button>
                              <button
                                onClick={() => {
                                  setSym(v => clamp(v - 8));
                                  setPara(v => clamp(v + 10));
                                  setHRV(v => clamp(v + 5, 20, 110));
                                  setStressLevel(v => clamp(v - 2, 0, 10));
                                }}
                                className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                              >
                                📖 睡前閱讀 15 分
                              </button>
                              <button
                                onClick={() => {
                                  setSym(v => clamp(v + 12));
                                  setPara(v => clamp(v - 6));
                                  setHRV(v => clamp(v - 4, 20, 110));
                                  setStressLevel(v => clamp(v + 2, 0, 10));
                                }}
                                className="rounded-lg border border-red-400/40 bg-red-500/10 px-3 py-1.5 transition hover:bg-red-500/20 active:scale-95"
                              >
                                🎮 打電動到午夜
                              </button>
                            </div>
                          </div>

                          {/* === 下面是你原本的四大類 ＋ 一鍵假日風格 === */}

                          {/* 放鬆系 */}
                          <div className="rounded-xl bg-indigo-500/10 p-3 ring-1 ring-indigo-500/20">
                            <div className="mb-2 text-sm font-semibold text-indigo-200">🧘 放鬆系</div>
                            <div className="flex flex-wrap gap-2 text-sm">
                              <button
                                onClick={() => {
                                  setSym(v => clamp(v - 10));
                                  setPara(v => clamp(v + 15));
                                  setHRV(v => clamp(v + 8, 20, 110));
                                  setStressLevel(v => clamp(v - 2, 0, 10));
                                }}
                                className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                              >
                                🧘‍♀️ 瑜伽/冥想 20 分
                              </button>
                              <button
                                onClick={() => {
                                  setSym(v => clamp(v - 6));
                                  setPara(v => clamp(v + 8));
                                  setHRV(v => clamp(v + 5, 20, 110));
                                  setStressLevel(v => clamp(v - 1, 0, 10));
                                }}
                                className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                              >
                                ☀️ 公園曬太陽 30 分
                              </button>
                              <button
                                onClick={() => {
                                  setSym(v => clamp(v - 4));
                                  setPara(v => clamp(v + 6));
                                  setHRV(v => clamp(v + 3, 20, 110));
                                  setStressLevel(v => clamp(v - 1, 0, 10));
                                }}
                                className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                              >
                                📖 閱讀 30 分
                              </button>
                            </div>
                          </div>

                          {/* 運動系 */}
                          <div className="rounded-xl bg-emerald-500/10 p-3 ring-1 ring-emerald-500/20">
                            <div className="mb-2 text-sm font-semibold text-emerald-200">🏃 運動系</div>
                            <div className="flex flex-wrap gap-2 text-sm">
                              <button
                                onClick={() => {
                                  setSym(v => clamp(v + 8));
                                  setPara(v => clamp(v + 5));
                                  setHRV(v => clamp(v + 6, 20, 110));
                                  setStressLevel(v => clamp(v, 0, 10));
                                }}
                                className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                              >
                                ⛰️ 爬山 2 小時
                              </button>
                              <button
                                onClick={() => {
                                  setSym(v => clamp(v + 10));
                                  setPara(v => clamp(v + 8));
                                  setHRV(v => clamp(v + 8, 20, 110));
                                  setStressLevel(v => clamp(v + 1, 0, 10));
                                }}
                                className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                              >
                                🚴 騎車 半天
                              </button>
                              <button
                                onClick={() => {
                                  setSym(v => clamp(v + 6));
                                  setPara(v => clamp(v + 4));
                                  setHRV(v => clamp(v + 4, 20, 110));
                                  setStressLevel(v => clamp(v, 0, 10));
                                }}
                                className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                              >
                                🏊 游泳 40 分
                              </button>
                            </div>
                          </div>

                          {/* 社交/娛樂系 */}
                          <div className="rounded-xl bg-amber-500/10 p-3 ring-1 ring-amber-500/20">
                            <div className="mb-2 text-sm font-semibold text-amber-200">🎉 社交/娛樂</div>
                            <div className="flex flex-wrap gap-2 text-sm">
                              <button
                                onClick={() => {
                                  setSym(v => clamp(v + 10));
                                  setPara(v => clamp(v + 2));
                                  setHRV(v => clamp(v + 1, 20, 110));
                                  setStressLevel(v => clamp(v + 1, 0, 10));
                                }}
                                className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                              >
                                🎤 唱歌/聚會
                              </button>
                              <button
                                onClick={() => {
                                  setSym(v => clamp(v + 15));
                                  setPara(v => clamp(v - 8));
                                  setHRV(v => clamp(v - 6, 20, 110));
                                  setStressLevel(v => clamp(v + 2, 0, 10));
                                }}
                                className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                              >
                                🍻 聚餐喝酒
                              </button>
                              <button
                                onClick={() => {
                                  setSym(v => clamp(v + 3));
                                  setPara(v => clamp(v + 2));
                                  setHRV(v => clamp(v, 20, 110));
                                  setStressLevel(v => clamp(v, 0, 10));
                                }}
                                className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                              >
                                🍲 家人聚餐
                              </button>
                            </div>
                          </div>

                          {/* 懶人/居家系 */}
                          <div className="rounded-xl bg-white/5 p-3 ring-1 ring-white/10">
                            <div className="mb-2 text-sm font-semibold text-white/90">🛋️ 居家/放空</div>
                            <div className="flex flex-wrap gap-2 text-sm">
                              <button
                                onClick={() => {
                                  setSym(v => clamp(v + 8));
                                  setPara(v => clamp(v - 2));
                                  setHRV(v => clamp(v - 2, 20, 110));
                                  setStressLevel(v => clamp(v + 1, 0, 10));
                                }}
                                className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                              >
                                📺 追劇一下午
                              </button>
                              <button
                                onClick={() => {
                                  setSym(v => clamp(v + 6));
                                  setPara(v => clamp(v - 1));
                                  setHRV(v => clamp(v - 1, 20, 110));
                                  setStressLevel(v => clamp(v + 1, 0, 10));
                                }}
                                className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                              >
                                🍩 甜點 + 手機
                              </button>
                              <button
                                onClick={() => {
                                  setSym(v => clamp(v - 5));
                                  setPara(v => clamp(v + 7));
                                  setHRV(v => clamp(v + 4, 20, 110));
                                  setStressLevel(v => clamp(v - 1, 0, 10));
                                }}
                                className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 transition hover:bg-white/10 active:scale-95"
                              >
                                🛁 泡澡放鬆
                              </button>
                            </div>
                          </div>

                          {/* 一鍵假日風格 */}
                          <div className="rounded-xl bg-white/5 p-3 ring-1 ring-white/10">
                            <div className="mb-2 text-sm font-semibold text-white/90">🃏 一鍵假日風格</div>
                            <div className="flex flex-wrap gap-2 text-sm">
                              <button
                                onClick={() => {
                                  setSym(40);
                                  setPara(80);
                                  setHRV(80);
                                  setStressLevel(1);
                                }}
                                className="rounded-lg border border-white/10 bg-indigo-500/10 px-3 py-1.5 font-medium text-indigo-100 transition hover:bg-indigo-500/20 active:scale-95"
                              >
                                🧘 真正放鬆日
                              </button>
                              <button
                                onClick={() => {
                                  setSym(75);
                                  setPara(45);
                                  setHRV(45);
                                  setStressLevel(5);
                                }}
                                className="rounded-lg border border-white/10 bg-amber-500/10 px-3 py-1.5 font-medium text-amber-100 transition hover:bg-amber-500/20 active:scale-95"
                              >
                                🎭 假放鬆日
                              </button>
                              <button
                                onClick={() => {
                                  setSym(70);
                                  setPara(60);
                                  setHRV(65);
                                  setStressLevel(3);
                                }}
                                className="rounded-lg border border-white/10 bg-emerald-500/10 px-3 py-1.5 font-medium text-emerald-100 transition hover:bg-emerald-500/20 active:scale-95"
                              >
                                ⚡ 爆能量日
                              </button>
                            </div>
                          </div>

                          {/* 數值視覺化 */}
                          <div className="grid grid-cols-3 gap-3">
                            <Meter label="Balance" value={balance} tone="emerald" />
                            <Meter label="HF（放鬆）」示意" value={clamp(hf / 10)} tone="indigo" />
                            <Meter label="HRV（SDNN）" value={clamp(hrv)} tone="purple" />
                          </div>

                          {/* 文案解讀 */}
                          <div className="flex items-center gap-2 text-sm">
                            <Badge tone={balance >= 70 ? "green" : balance >= 40 ? "yellow" : "red"}>
                              {balance >= 70 ? "🌴 真放鬆假日" : balance >= 40 ? "😌 半放鬆／假放鬆" : "🎢 假日也很嗨"}
                            </Badge>
                            <span className="text-white/70">
                              {balance >= 70
                                ? "很好，假日真的有讓身體煞車，可以當作理想的休假模板。"
                                : balance >= 40
                                ? "有休息到，但還可以再多一些身體放鬆（呼吸、伸展或泡澡）。"
                                : "玩得很開心但也很刺激，建議睡前多做放鬆訓練，幫助自律神經收尾。"}
                            </span>
                          </div>
                        </div>

                        {/* 右邊：假日小人物狀態（套用壓力表情） */}
                        <div className="w-full md:w-40 rounded-2xl border border-white/10 bg-white/5 p-3 text-xs text-white/80">
                          <div className="mb-2 text-[11px] uppercase tracking-wide text-white/60">
                            假日狀態視覺化
                          </div>
                          <div className="flex flex-col items-center gap-3">
                            {(() => {
                              const face =
                                stressLevel >= 8 ? "😵" :
                                stressLevel >= 5 ? "😣" :
                                stressLevel >= 2 ? "🙂" :
                                "😌";
                              const label =
                                stressLevel >= 8 ? "過度刺激" :
                                stressLevel >= 5 ? "半放鬆" :
                                stressLevel >= 2 ? "普通輕鬆" :
                                "完全放鬆";

                              return (
                                <>
                                  <div className="relative flex flex-col items-center">
                                    {/* 頭部：用 emoji 呈現壓力表情 */}
                                    <div className="flex h-8 w-8 items-center justify-center rounded-full bg-white/90 text-lg">
                                      {face}
                                    </div>
                                    {/* Balance 柱狀條 */}
                                    <div
                                      className={`mt-1 h-16 w-6 rounded-full border-2 ${
                                        balance >= 70
                                          ? "border-emerald-400 bg-emerald-500/20"
                                          : balance >= 40
                                          ? "border-amber-400 bg-amber-500/15"
                                          : "border-red-400 bg-red-500/15"
                                      } flex items-end justify-center overflow-hidden`}
                                    >
                                      <div
                                        className={`w-full ${
                                          balance >= 70
                                            ? "bg-emerald-400"
                                            : balance >= 40
                                            ? "bg-amber-400"
                                            : "bg-red-400"
                                        }`}
                                        style={{ height: `${clamp(balance)}%` }}
                                      />
                                    </div>
                                  </div>

                                  <div className="text-center space-y-1">
                                    <div className="text-[11px] text-white/60">
                                      Balance：{Math.round(balance)}
                                    </div>
                                    <div className="text-[11px] text-white/60">
                                      HRV：{Math.round(hrv)}
                                    </div>
                                    <div className="text-[11px] text-white/60">
                                      壓力等級：{stressLevel} / 10
                                    </div>
                                    <div className="mt-1 text-xs font-semibold">
                                      {label}
                                    </div>
                                  </div>
                                </>
                              );
                            })()}
                          </div>
                        </div>
                      </div>
                      </div>


                   </Card>


                  {/* --- 原遊戲 A：油門 vs 煞車 --- */}
                  <Card
                    title="油門 vs 煞車：把車子開穩！"
                    subtitle="拖動滑桿：交感（油門）與副交感（煞車）。保持平衡，車子會更平順（Balance↑）。"
                    footer={
                      <div className="flex items-center gap-2">
                        <Badge tone={ratioWarn.tone}>{ratioWarn.msg}</Badge>
                        <span className="text-xs">LF/HF ≈ <span className="tabular-nums">{ratio}</span></span>
                      </div>
                    }
                  >
                    <div className="space-y-4">
                      <div className="grid gap-3">
                        <div className="flex items-center justify-between text-sm text-white/70">
                          <span>交感（LF ≈ 油門）</span><span className="tabular-nums">{Math.round(sym)}</span>
                        </div>
                        <input type="range" min="0" max="100" value={sym} onChange={(e)=>setSym(parseInt(e.target.value))} className="w-full" />
                      </div>
                      <div className="grid gap-3">
                        <div className="flex items-center justify-between text-sm text-white/70">
                          <span>副交感（HF ≈ 煞車）</span><span className="tabular-nums">{Math.round(para)}</span>
                        </div>
                        <input type="range" min="0" max="100" value={para} onChange={(e)=>setPara(parseInt(e.target.value))} className="w-full" />
                      </div>

                      <div className="mt-2 space-y-3">
                        <Meter label="平順度 Balance (越高越穩)" value={balance} tone="emerald" />
                        <div className="grid grid-cols-3 gap-3">
                          <Meter label="LF (交感)" value={clamp(lf/12)} tone="yellow" />
                          <Meter label="HF (副交感)" value={clamp(hf/10)} tone="indigo" />
                          <Meter label="HRV (SDNN 指標)" value={clamp(hrv)} tone="purple" />
                        </div>
                      </div>

                      <div className="mt-4 h-24 w-full rounded-xl bg-gradient-to-r from-emerald-500/10 via-amber-500/10 to-indigo-500/10 border border-white/10 overflow-hidden relative">
                        <div className="absolute inset-x-0 top-1/2 -translate-y-1/2 h-px bg-white/20"></div>
                        <div className="absolute left-2 top-1/2 -translate-y-1/2 rounded-full bg-white/90 shadow-md" style={{ width: 18, height: 18, transform: `translate(${balance * 2.4}px, -50%)` }} title="小車車：平順度越高，跑得越直"></div>
                      </div>
                    </div>
                  </Card>

                  {/* --- 原遊戲 B：5–5 呼吸訓練 --- */}
                  <Card
                    title="5–5 呼吸節奏：啟動副交感"
                    subtitle="按下開始，跟著圓圈 5 秒吸氣 + 5 秒吐氣。持續 1–2 分鐘可觀察 HF/HRV 緩步上升（示意）。"
                    footer={
                      <div className="flex flex-wrap items-center gap-2 text-xs">
                        <Badge tone="purple">HRV↑（示意）</Badge>
                        <span className="text-white/70">建議：每天 2–3 回合 × 1 分鐘</span>
                      </div>
                    }
                  >
                    <div className="flex flex-col items-center gap-5">
                      <div className="relative grid place-items-center">
                        <div className="h-40 w-40 rounded-full border-4 border-white/20"></div>
                        <div className={`absolute h-32 w-32 rounded-full bg-indigo-400/80 blur-sm transition-transform duration-[5000ms] ease-in-out ${breathingOn ? "scale-100" : "scale-75"}`}></div>
                        <div className="absolute text-sm font-medium text-white/90">{breathingOn ? "跟著呼吸" : "準備"}</div>
                      </div>
                      <div className="flex items-center gap-3">
                        <button onClick={() => setBreathingOn((v) => !v)} className={`rounded-xl px-4 py-2 text-sm font-semibold shadow ${breathingOn ? "bg-red-500/90 hover:bg-red-500" : "bg-green-500/90 hover:bg-green-500"}`}>
                          {breathingOn ? "停止" : "開始"}
                        </button>
                        <Toggle checked={breathingOn} onChange={setBreathingOn} label="跟著節奏：5 秒吸氣 / 5 秒吐氣" />
                      </div>
                      <div className="grid w-full grid-cols-3 gap-3">
                        <Meter label="HF（放鬆）示意" value={clamp(hf/10)} tone="indigo" />
                        <Meter label="HRV（SDNN）" value={clamp(hrv)} tone="purple" />
                        <Meter label="平順度 Balance" value={balance} tone="emerald" />
                      </div>
                    </div>
                  </Card>

                    {/* === 新增：遊戲 C === */}
                    <Card
                      title="🕹️ 情境反應挑戰（30 秒）"
                      subtitle="點擊『壓力事件』或『放鬆行為』，在 30 秒內盡量讓 Balance 維持在 ≥ 70 的綠區。"
                      footer={<div className="text-xs text-white/70">小提醒：壓力來時先停一下，做 5 次深呼吸通常有幫助。</div>}
                    >
                      <div className="space-y-3">
                        <div className="flex items-center gap-3 text-sm">
                          <Badge tone="gray">倒數：{30 - cTime}s</Badge>
                          <Badge tone="green">綠區秒數：{cScore}s</Badge>
                          {cRunning ? <Badge tone="yellow">進行中</Badge> : <Badge tone="purple">就緒</Badge>}
                          {!cRunning && (
                            <button
                              onClick={startC}
                              className="ml-auto rounded-lg bg-emerald-500/90 px-3 py-1.5 text-sm font-semibold hover:bg-emerald-500"
                            >
                              開始挑戰
                            </button>
                          )}
                        </div>

                        <div className="grid grid-cols-2 gap-3">
                          <div className="rounded-xl bg-red-500/10 p-3 ring-1 ring-red-500/20">
                            <div className="mb-2 text-sm font-semibold text-red-300">壓力事件</div>
                            <div className="flex flex-wrap gap-2">
                              {["咖啡加倍","急件通知","吵雜環境"].map((k)=>(
                                <button
                                  key={k}
                                  onClick={()=>triggerStress(k)}
                                  disabled={!cRunning}
                                  className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 text-sm hover:bg-white/10 disabled:opacity-40"
                                >
                                  {k}
                                </button>
                              ))}
                            </div>
                          </div>

                          <div className="rounded-xl bg-indigo-500/10 p-3 ring-1 ring-indigo-500/20">
                            <div className="mb-2 text-sm font-semibold text-indigo-300">放鬆行為</div>
                            <div className="flex flex-wrap gap-2">
                              {["深呼吸 10 次","伸展 1 分鐘","閉眼靜坐"].map((k)=>(
                                <button
                                  key={k}
                                  onClick={()=>triggerCalm(k)}
                                  disabled={!cRunning}
                                  className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 text-sm hover:bg-white/10 disabled:opacity-40"
                                >
                                  {k}
                                </button>
                              ))}
                            </div>
                          </div>
                        </div>

                        <div className="grid grid-cols-3 gap-3">
                          <Meter label="Balance" value={balance} tone="emerald" />
                          <Meter label="LF" value={clamp(lf/12)} tone="yellow" />
                          <Meter label="HRV" value={clamp(hrv)} tone="purple" />
                        </div>
                      </div>
                    </Card>




                    {/* === 新增：遊戲 D === */}
                    <Card
                      title="🎛️ 生活習慣調音台（6 步內達成目標）"
                      subtitle="目標：Balance ≥ 80 且 HRV ≥ 60。從下方選擇 6 個調整因子（依序點擊）。"
                      footer={<div className="text-xs">{dGoalOK ? "✅ 完成目標！" : `步數：${dSteps}/${D_LIMIT}（未達成可重置再試）`}</div>}
                    >
                      <div className="space-y-3">
                        <div className="flex flex-wrap gap-2">
                          <button onClick={()=>dApply("☕ 咖啡因", {ds:+8, dp:-4, dh:-3})} className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 text-sm hover:bg-white/10">☕ 咖啡因</button>
                          <button onClick={()=>dApply("🤸 伸展", {ds:-3, dp:+8, dh:+4})} className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 text-sm hover:bg-white/10">🤸 伸展</button>
                          <button onClick={()=>dApply("📱 晚間藍光", {ds:+6, dp:-5, dh:-4})} className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 text-sm hover:bg-white/10">📱 晚間藍光</button>
                          <button onClick={()=>dApply("🧘 正念 2 分鐘", {ds:-5, dp:+9, dh:+6})} className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 text-sm hover:bg-white/10">🧘 正念 2 分鐘</button>
                          <button onClick={()=>dApply("😴 午後小憩", {ds:-3, dp:+6, dh:+5})} className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 text-sm hover:bg-white/10">😴 午後小憩</button>
                          <button onClick={()=>dApply("🏋️ 重訓後拉伸", {ds:-2, dp:+5, dh:+3})} className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 text-sm hover:bg-white/10">🏋️ 重訓後拉伸</button>
                          <button onClick={()=>dApply("🍵 無咖啡因熱飲", {ds:-2, dp:+4, dh:+2})} className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 text-sm hover:bg-white/10">🍵 無咖啡因熱飲</button>
                          <button onClick={()=>dApply("🌞 早晨日照 10 分", {ds:-1, dp:+3, dh:+2})} className="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 text-sm hover:bg-white/10">🌞 早晨日照 10 分</button>
                        </div>

                        <div className="flex items-center gap-2 text-xs text-white/70">
                          <Badge tone={dGoalOK ? "green" : "yellow"}>{dGoalOK ? "已達成目標！" : "尚未達成目標"}</Badge>
                          <button onClick={dReset} className="ml-auto rounded-lg bg-white/10 px-3 py-1.5 hover:bg-white/15">重置</button>
                        </div>

                        <div className="grid grid-cols-3 gap-3">
                          <Meter label="Balance" value={balance} tone="emerald" />
                          <Meter label="HF（放鬆）示意" value={clamp(hf/10)} tone="indigo" />
                          <Meter label="HRV（SDNN）" value={clamp(hrv)} tone="purple" />
                        </div>

                        {dLog.length > 0 && (
                          <div className="rounded-xl bg-white/5 p-3 text-xs text-white/80">
                            已選步驟：{dLog.join("、")}
                            {!dGoalOK && <div className="mt-1 text-white/60">提示：優先選擇能「降低交感、提升副交感/HRV」的選項。</div>}
                          </div>
                        )}
                      </div>
                    </Card>



                  {/* --- 原：測前注意 + 指標白話 --- */}
                  <Card title="測前注意事項" subtitle="避免干擾，確保數據穩定">
                    <ul className="list-disc pl-5 space-y-1 text-sm">
                      <li>檢測前休息 5 分鐘；避免剛運動或喝咖啡、抽菸。</li>
                      <li>手保持穩定、手機靜音、不講話。</li>
                      <li>若有心律不整/心臟病史，請先告知。</li>
                    </ul>
                  </Card>
                  <Card title="核心指標（白話）" subtitle="把數字變成容易理解的語言">
                    <div className="space-y-3 text-sm">
                      <div className="rounded-xl bg-white/5 p-3"><strong>HRV：</strong>身體面對壓力的調節彈性（越高越能放鬆/回復）。</div>
                      <div className="rounded-xl bg-white/5 p-3"><strong>LF：</strong>交感活性（油門）。<br/><strong>HF：</strong>副交感活性（煞車）。</div>
                      <div className="rounded-xl bg-white/5 p-3"><strong>LF/HF：</strong>油門與煞車的配合程度；約 0.5–2 最平衡。</div>
                    </div>
                  </Card>
                </section>
              )}

              {tab === "learn" && (
                <section className="grid gap-6 md:grid-cols-2">
                  <Card title="什麼是自律神經？" subtitle="交感＝油門；副交感＝煞車">
                    <p className="text-sm leading-relaxed">
                      自律神經像是身體的「自動駕駛系統」。當你需要打起精神、應對壓力，
                      <strong>交感神經</strong>會踩油門；當你要休息、修復，<strong>副交感神經</strong>會踩煞車。兩者協調，身體就平順。
                    </p>
                    <div className="mt-4 grid gap-3 md:grid-cols-2 text-sm">
                      <div className="rounded-xl bg-amber-400/15 p-3 ring-1 ring-amber-400/30">
                        <Badge tone="yellow">交感（LF）</Badge>
                        <ul className="mt-2 list-disc pl-5 space-y-1">
                          <li>提神、提升心率與血壓</li>
                          <li>面對壓力/挑戰的動員</li>
                          <li>過高 → 緊繃、睡不好</li>
                        </ul>
                      </div>
                      <div className="rounded-xl bg-indigo-400/15 p-3 ring-1 ring-indigo-400/30">
                        <Badge tone="blue">副交感（HF）</Badge>
                        <ul className="mt-2 list-disc pl-5 space-y-1">
                          <li>放鬆、消化、修復</li>
                          <li>呼吸節奏與迷走神經</li>
                          <li>過低 → 難以恢復</li>
                        </ul>
                      </div>
                    </div>
                  </Card>

                  <Card title="為什麼要測？" subtitle="這不是診斷，是生活狀態的鏡子">
                    <ul className="list-disc pl-5 space-y-1 text-sm">
                      <li>了解壓力與放鬆的平衡（LF/HF）。</li>
                      <li>觀察疲勞恢復力與睡眠品質趨勢（HRV）。</li>
                      <li>把數據轉成行動：呼吸、睡眠、運動、情緒管理。</li>
                    </ul>
                  </Card>

                  <Card title="衛教建議（依結果）" subtitle="把數字變成可執行的日常">
                    <ul className="list-disc pl-5 space-y-1 text-sm">
                      <li><strong>LF/HF 高、HRV 低：</strong>晚上 10 分鐘呼吸/冥想、睡前遠離手機、白天 30 分鐘快走。</li>
                      <li><strong>HF 高、LF 低：</strong>維持節奏；補水、日照、均衡飲食。</li>
                      <li><strong>IHB 頻繁：</strong>請醫師進一步評估（ECG）。</li>
                    </ul>
                  </Card>

                  <Card title="常見參考範圍（成人示意）" subtitle="僅作衛教示意，非診斷基準">
                    <div className="grid gap-3 text-sm">
                      <div className="rounded-xl bg-white/5 p-3"><strong>HRV：</strong>50–100 ms 佳；&lt;50 偏低</div>
                      <div className="rounded-xl bg-white/5 p-3"><strong>LF/HF：</strong>0.5–2.0 平衡；&gt;2 緊繃；&lt;0.5 疲倦</div>
                      <div className="rounded-xl bg-white/5 p-3"><strong>HF：</strong>200–1000 ms² 常見</div>
                      <div className="rounded-xl bg-white/5 p-3"><strong>LF：</strong>300–1200 ms² 常見</div>
                    </div>
                  </Card>
                </section>
              )}

              {tab === "quiz" && (
                <section className="mx-auto max-w-3xl">
                  <Card title="概念小測驗" subtitle="共 3 題，檢視你對 ANS 的理解">
                    <div className="space-y-4">
                      <div className="rounded-xl bg-white/5 p-4 text-sm">
                        <div className="mb-2 text-white/90">第 {quizIdx + 1} 題／3</div>
                        <div className="text-base font-medium">{q[quizIdx].ask}</div>
                      </div>
                      <div className="grid gap-3">
                        {q[quizIdx].choices.map((c, i) => (
                          <button key={i} onClick={() => setPicked(i)} className={`w-full rounded-xl border px-4 py-2 text-left text-sm transition ${picked === i ? "border-indigo-400 bg-indigo-400/20" : "border-white/10 bg-white/5 hover:bg-white/10"}`}>
                            {c}
                          </button>
                        ))}
                      </div>
                      <div className="flex items-center justify-between">
                        <div className="text-sm text-white/70">分數：<span className="tabular-nums font-semibold text-white">{quizScore}</span></div>
                        <button onClick={submitPick} className="rounded-xl bg-indigo-500/90 px-4 py-2 text-sm font-semibold hover:bg-indigo-500">
                          {quizIdx === q.length - 1 ? "完成/再來一次" : "下一題"}
                        </button>
                      </div>
                    </div>
                  </Card>
                </section>
              )}


              {tab === "supp" && (
              <section className="space-y-6">
                <div className="grid gap-6 lg:grid-cols-[minmax(0,2fr)_minmax(0,1fr)]">
                  {/* 左：三大類型營養卡片，按了會影響 sym / para / hrv */}
                  <Card
                    variant="dark"
                    title="🍃 養生 / 補充指引"
                    subtitle="依照你的『自律神經狀態』選擇適合的營養支持，按下去會直接模擬對數值的影響。"
                  >
                    <div className="space-y-4 text-sm leading-relaxed text-white/90">
                      {/* 交感過強 */}
                      <div
                        className={`rounded-2xl border p-4 transition hover:shadow-xl hover:-translate-y-0.5 ${
                          ansMode === "stress"
                            ? "border-red-400/70 bg-gradient-to-br from-red-500/30 via-fuchsia-500/20 to-slate-900/60 animate-pulse"
                            : "border-red-400/40 bg-gradient-to-br from-red-500/15 via-fuchsia-500/10 to-slate-900/60"
                        }`}
                      >
                        <div className="mb-2 flex items-center gap-2">
                          <span className="text-lg">🌪 交感神經過強（壓力 / 緊繃）</span>
                          {ansMode === "stress" && (
                            <Badge tone="yellow">目前最推薦</Badge>
                          )}
                        </div>
                        <p className="mb-2 text-white/75">
                          適合：最近壓力大、心跳偏快、腦袋停不下來、Balance 偏低。
                        </p>
                        <div className="flex flex-wrap gap-2">
                          <button
                            onClick={() => {
                              setSym(v => clamp(v - 6));
                              setPara(v => clamp(v + 10));
                              setHRV(v => clamp(v + 6, 20, 110));
                            }}
                            className="rounded-full border border-white/20 bg-black/20 px-3 py-1.5 text-xs md:text-sm hover:bg-emerald-500/20 hover:border-emerald-400/60 hover:-translate-y-0.5 hover:shadow-lg active:scale-95 transition"
                          >
                            🟢 鎂（Magnesium）— 放鬆神經、改善睡眠
                          </button>
                          <button
                            onClick={() => {
                              setSym(v => clamp(v - 3));
                              setPara(v => clamp(v + 5));
                              setHRV(v => clamp(v + 3, 20, 110));
                            }}
                            className="rounded-full border border-white/20 bg-black/20 px-3 py-1.5 text-xs md:text-sm hover:bg-emerald-500/20 hover:border-emerald-400/60 hover:-translate-y-0.5 hover:shadow-lg active:scale-95 transition"
                          >
                            🟢 L-茶胺酸 — 放鬆但不嗜睡
                          </button>
                          <button
                            onClick={() => {
                              setSym(v => clamp(v - 2));
                              setPara(v => clamp(v + 4));
                              setHRV(v => clamp(v + 4, 20, 110));
                            }}
                            className="rounded-full border border-white/20 bg-black/20 px-3 py-1.5 text-xs md:text-sm hover:bg-emerald-500/20 hover:border-emerald-400/60 hover:-translate-y-0.5 hover:shadow-lg active:scale-95 transition"
                          >
                            🔵 Omega-3（魚油）— 穩定情緒與 HRV
                          </button>
                          <button
                            onClick={() => {
                              setSym(v => clamp(v - 3));
                              setPara(v => clamp(v + 6));
                              setHRV(v => clamp(v + 5, 20, 110));
                            }}
                            className="rounded-full border border-white/20 bg-black/20 px-3 py-1.5 text-xs md:text-sm hover:bg-emerald-500/20 hover:border-emerald-400/60 hover:-translate-y-0.5 hover:shadow-lg active:scale-95 transition"
                          >
                            🌙 GABA / 甘胺酸 — 睡前收尾放鬆
                          </button>
                        </div>
                      </div>

                      {/* 副交感偏弱 */}
                      <div
                        className={`rounded-2xl border p-4 transition hover:shadow-xl hover:-translate-y-0.5 ${
                          ansMode === "middle"
                            ? "border-indigo-400/70 bg-gradient-to-br from-indigo-500/25 via-sky-500/20 to-slate-900/60"
                            : "border-indigo-400/40 bg-gradient-to-br from-indigo-500/15 via-sky-500/10 to-slate-900/60"
                        }`}
                      >
                        <div className="mb-2 flex items-center gap-2">
                          <span className="text-lg">🌙 副交感偏弱（放鬆踩不下煞車）</span>
                          {ansMode === "middle" && (
                            <Badge tone="blue">建議調整恢復力</Badge>
                          )}
                        </div>
                        <p className="mb-2 text-white/75">
                          適合：總覺得累、休假也恢復很慢、運動後常拖很久才回神。
                        </p>
                        <div className="flex flex-wrap gap-2">
                          <button
                            onClick={() => {
                              setPara(v => clamp(v + 8));
                              setHRV(v => clamp(v + 4, 20, 110));
                            }}
                            className="rounded-full border border-white/20 bg-black/20 px-3 py-1.5 text-xs md:text-sm hover:bg-indigo-500/20 hover:border-indigo-300 hover:-translate-y-0.5 hover:shadow-lg active:scale-95 transition"
                          >
                            🔋 CoQ10 — 提升細胞能量與心臟恢復
                          </button>
                          <button
                            onClick={() => {
                              setPara(v => clamp(v + 5));
                              setHRV(v => clamp(v + 3, 20, 110));
                            }}
                            className="rounded-full border border-white/20 bg-black/20 px-3 py-1.5 text-xs md:text-sm hover:bg-indigo-500/20 hover:border-indigo-300 hover:-translate-y-0.5 hover:shadow-lg active:scale-95 transition"
                          >
                            💧 電解質 — 穩定心律與循環
                          </button>
                          <button
                            onClick={() => {
                              setPara(v => clamp(v + 4));
                              setHRV(v => clamp(v + 2, 20, 110));
                            }}
                            className="rounded-full border border-white/20 bg-black/20 px-3 py-1.5 text-xs md:text-sm hover:bg-indigo-500/20 hover:border-indigo-300 hover:-translate-y-0.5 hover:shadow-lg active:scale-95 transition"
                          >
                            🌞 維生素 D3 — 與精神穩定與疲勞有關
                          </button>
                          <button
                            onClick={() => {
                              setPara(v => clamp(v + 3));
                              setHRV(v => clamp(v + 2, 20, 110));
                            }}
                            className="rounded-full border border-white/20 bg-black/20 px-3 py-1.5 text-xs md:text-sm hover:bg-indigo-500/20 hover:border-indigo-300 hover:-translate-y-0.5 hover:shadow-lg active:scale-95 transition"
                          >
                            🧠 B12 + 葉酸 — 支持神經修復
                          </button>
                        </div>
                      </div>

                      {/* HRV 偏低 */}
                      <div
                        className={`rounded-2xl border p-4 transition hover:shadow-xl hover:-translate-y-0.5 ${
                          ansMode === "recovery"
                            ? "border-emerald-400/70 bg-gradient-to-br from-emerald-500/25 via-teal-500/20 to-slate-900/60"
                            : "border-emerald-400/40 bg-gradient-to-br from-emerald-500/15 via-teal-500/10 to-slate-900/60"
                        }`}
                      >
                        <div className="mb-2 flex items-center gap-2">
                          <span className="text-lg">💓 HRV 偏低（恢復力不足）</span>
                          {ansMode === "recovery" && (
                            <Badge tone="green">目前狀態不錯，可進階優化</Badge>
                          )}
                        </div>
                        <p className="mb-2 text-white/75">
                          適合：想要提升「適應壓力的彈性」，讓身體更有餘裕面對挑戰。
                        </p>
                        <div className="flex flex-wrap gap-2">
                          <button
                            onClick={() => {
                              setHRV(v => clamp(v + 6, 20, 110));
                            }}
                            className="rounded-full border border-white/20 bg-black/20 px-3 py-1.5 text-xs md:text-sm hover:bg-emerald-500/20 hover:border-emerald-300 hover:-translate-y-0.5 hover:shadow-lg active:scale-95 transition"
                          >
                            🔵 Omega-3 — HRV 研究最多的營養素之一
                          </button>
                          <button
                            onClick={() => {
                              setHRV(v => clamp(v + 4, 20, 110));
                            }}
                            className="rounded-full border border-white/20 bg-black/20 px-3 py-1.5 text-xs md:text-sm hover:bg-emerald-500/20 hover:border-emerald-300 hover:-translate-y-0.5 hover:shadow-lg active:scale-95 transition"
                          >
                            🟢 鎂 — 提升自律神經彈性
                          </button>
                          <button
                            onClick={() => {
                              setHRV(v => clamp(v + 3, 20, 110));
                            }}
                            className="rounded-full border border-white/20 bg-black/20 px-3 py-1.5 text-xs md:text-sm hover:bg-emerald-500/20 hover:border-emerald-300 hover:-translate-y-0.5 hover:shadow-lg active:scale-95 transition"
                          >
                            🧬 益生菌 — 腸道 × 大腦軸
                          </button>
                          <button
                            onClick={() => {
                              setHRV(v => clamp(v + 3, 20, 110));
                            }}
                            className="rounded-full border border-white/20 bg-black/20 px-3 py-1.5 text-xs md:text-sm hover:bg-emerald-500/20 hover:border-emerald-300 hover:-translate-y-0.5 hover:shadow-lg active:scale-95 transition"
                          >
                            🟡 薑黃素 — 抗發炎，間接幫助恢復
                          </button>
                        </div>
                      </div>
                    </div>
                  </Card>

                  {/* 右：即時狀態可視化＋建議 */}
                  <div className="rounded-2xl border border-white/10 bg-slate-900/70 p-4 flex flex-col gap-3">
                    <div className="flex items-center justify-between">
                      <div>
                        <div className="text-xs uppercase tracking-wide text-white/60">
                          目前自律神經狀態
                        </div>
                        <div className="mt-1 text-lg font-semibold">
                          {balance >= 70
                            ? "恢復力不錯，偏放鬆/平衡"
                            : balance <= 40
                            ? "偏緊繃，交感比較用力"
                            : "介於中間，視今天活動微調"}
                        </div>
                      </div>
                      <div className="flex items-center gap-2">
                      <Badge tone={ratioWarn.tone}>{ratioWarn.msg}</Badge>
                      <button
                        onClick={() => {
                          setSym(60);
                          setPara(45);
                          setHRV(55);
                        }}
                        className="rounded-full border border-white/20 bg-white/5 px-3 py-1 text-xs font-semibold text-white hover:bg白/10 active:scale-95 transition"
                      >
                        Reset
                      </button>
                    </div>
                    </div>

                    <div className="grid grid-cols-3 gap-3">
                      <Meter label="Balance" value={balance} tone="emerald" />
                      <Meter label="LF（交感）」示意" value={clamp(lf / 12)} tone="yellow" />
                      <Meter label="HRV（SDNN）" value={clamp(hrv)} tone="purple" />
                    </div>

                    <div className="mt-2 rounded-xl bg-black/30 p-3 text-xs text-white/80 space-y-1">
                      <div className="flex items-center gap-2">
                        <span className="text-white/70">建議策略：</span>
                        {ansMode === "stress" && (
                          <span className="text-amber-200">
                            先選「交感過強」那一區，從鎂 + 茶胺酸 + 低強度運動開始。
                          </span>
                        )}
                        {ansMode === "middle" && (
                          <span className="text-sky-200">
                            可以同時照顧恢復力與放鬆，交錯使用兩邊的營養素。
                          </span>
                        )}
                        {ansMode === "recovery" && (
                          <span className="text-emerald-200">
                            狀態不錯，可以用 HRV 區塊的營養素做精細調整。
                          </span>
                        )}
                      </div>
                      <div className="text-white/60">
                        小提醒：此頁面為健康教育與體驗用途，不取代醫療診斷，若有疾病請先諮詢專業醫師。
                      </div>
                    </div>
                  </div>
                </div>
              </section>
            )}


            </main>

            <footer className="mx-auto max-w-6xl px-6 pb-10 text-xs text-white/50">
              <div className="rounded-2xl border border-white/10 bg-white/5 p-4">
                <p>本頁為衛教示意與互動學習用途，非醫療診斷。若出現胸悶、暈眩、頻繁不規則心跳等症狀，請盡速就醫。</p>
              </div>
            </footer>
          </div>
        );
      }

      ReactDOM.createRoot(document.getElementById("root")).render(<ANSPlayground />);
    </script>
  </body>
</html>
